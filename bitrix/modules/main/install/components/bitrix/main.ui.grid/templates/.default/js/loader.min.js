(function(){"use strict";BX.namespace("BX.Grid");BX.Grid.Loader=function(t){this.parent=null;this.container=null;this.windowHeight=null;this.tbodyPos=null;this.headerPos=null;this.lastPosTop=null;this.lastBottomPos=null;this.table=null;this.init(t)};BX.Grid.Loader.prototype={init:function(t){this.parent=t;this.table=this.parent.getTable();BX.bind(this.getContainer(),"animationend",BX.proxy(this._onAnimationEnd,this));BX.bind(this.getContainer(),"webkitAnimationEnd",BX.proxy(this._onAnimationEnd,this));BX.bind(this.getContainer(),"oanimationend",BX.proxy(this._onAnimationEnd,this));BX.bind(this.getContainer(),"MSAnimationEnd",BX.proxy(this._onAnimationEnd,this))},adjustLoaderOffset:function(){this.windowHeight=BX.height(window);this.tbodyPos=BX.pos(this.table.tBodies[0]);this.headerPos=BX.pos(this.table.tHead);var t=window.scrollY;if(this.parent.isIE()){t=document.documentElement.scrollTop}var i=t+this.windowHeight-this.tbodyPos.top;var s=t-this.tbodyPos.top;if(i>this.tbodyPos.bottom-this.tbodyPos.top){i=this.tbodyPos.bottom-this.tbodyPos.top}if(s<this.headerPos.height){s=this.headerPos.height}else{i-=s;i+=this.headerPos.height}BX.Grid.Utils.requestAnimationFrame(BX.proxy(function(){if(s!==this.lastPosTop){this.getContainer().style.transform="translate3d(0px, "+s+"px, 0)"}if(i!==this.lastBottomPos){this.getContainer().style.height=i+"px"}this.lastPosTop=s;this.lastBottomPos=i},this))},getContainer:function(){if(!this.container){this.container=BX.Grid.Utils.getByClass(this.parent.getContainer(),this.parent.settings.get("classLoader"),true)}return this.container},show:function(){var t=this.getContainer();this.adjustLoaderOffset();BX.style(t,"display","block");BX.removeClass(t,this.parent.settings.get("classLoaderHide"));setTimeout(BX.delegate(function(){BX.addClass(t,this.parent.settings.get("classLoaderShow"))},this),0)},hide:function(){var t=this.getContainer();this.adjustLoaderOffset();BX.removeClass(t,this.parent.settings.get("classLoaderShow"));BX.addClass(t,this.parent.settings.get("classLoaderHide"))},_onAnimationEnd:function(t){if("animationName"in t&&t.animationName&&t.animationName===this.parent.settings.get("loaderHideAnimationName")){var i=this.getContainer();BX.removeClass(i,this.parent.settings.get("classLoaderShow"));BX.removeClass(i,this.parent.settings.get("classLoaderHide"));BX.style(i,"display","")}}}})();
//# sourceMappingURL=loader.map.js