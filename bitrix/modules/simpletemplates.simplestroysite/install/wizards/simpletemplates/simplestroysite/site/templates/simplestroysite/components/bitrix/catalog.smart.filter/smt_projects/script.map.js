{"version":3,"sources":["components/bitrix/catalog.smart.filter/smt_projects/script.js"],"names":["JCSmartFilter","ajaxURL","viewMode","params","this","form","timer","cacheKey","cache","popups","SEF_SET_FILTER_URL","bindUrlToButton","sef","SEF_DEL_FILTER_URL","prototype","keyup","input","clearTimeout","setTimeout","BX","delegate","reload","click","checkbox","position","pos","findParent","tag","values","name","value","gatherInputsValues","findChildren","RegExp","i","length","curFilterinput","postHandler","disabled","ajax","loadJSON","values2post","updateItem","PID","arItem","PROPERTY_TYPE","PRICE","trackBar","window","ENCODED_ID","VALUES","MIN","FILTERED_VALUE","setMinFilteredValue","VALUE","MAX","setMaxFilteredValue","hasOwnProperty","control","CONTROL_ID","label","document","querySelector","DISABLED","addClass","parentNode","removeClass","innerHTML","ELEMENT_COUNT","result","fromCache","hrefFILTER","url","modef","modef_num","ITEMS","popupId","destroy","FILTER_URL","href","util","htmlspecialcharsback","FILTER_AJAX_URL","COMPONENT_CONTAINER_ID","unbindAll","bind","e","insertToNode","PreventDefault","INSTANT_RELOAD","style","display","findChild","class","appendChild","buttonId","button","type","j","func","location","elements","el","toLowerCase","checked","options","selected","post","current","p","indexOf","substring","rest","pp","hideFilterProps","element","obj","filterBlock","propAngle","hasClass","easing","duration","start","opacity","height","offsetHeight","finish","transition","transitions","quart","step","state","complete","setAttribute","animate","obj_children_height","showDropDownPopup","contentNode","PopupWindowManager","create","autoHide","offsetLeft","offsetTop","overlay","draggable","restrict","closeByEsc","content","clone","show","selectDropDownItem","controlId","className","getCurrentPopup","close","namespace","Iblock","SmartFilter","arParams","leftSlider","rightSlider","tracker","trackerWrap","minInput","minInputId","maxInput","maxInputId","minPrice","parseFloat","maxPrice","curMinPrice","curMaxPrice","fltMinPrice","fltMaxPrice","precision","priceDiff","leftPercent","rightPercent","fltMinPercent","fltMaxPercent","colorUnavailableActive","colorAvailableActive","colorAvailableInactive","isTouch","init","documentElement","proxy","event","onMoveLeftSlider","onMoveRightSlider","onInputChange","left","right","getXCoord","elem","box","getBoundingClientRect","body","docElem","scrollLeft","pageXOffset","clientLeft","Math","round","getPageX","pageX","targetTouches","clientX","html","recountMinPrice","newMinPrice","toFixed","smartFilter","recountMaxPrice","newMaxPrice","leftInputValue","makeLeftSliderMove","rightInputValue","makeRightSliderMove","recountPrice","areBothSlidersMoving","countNewLeft","trackerXCoord","rightEdge","offsetWidth","newLeft","ondragstart","ontouchmove","ontouchend","touchend","onmousemove","onmouseup"],"mappings":"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","file":"script.min.js","sourcesContent":["function JCSmartFilter(ajaxURL, viewMode, params)\n{\n\tthis.ajaxURL = ajaxURL;\n\tthis.form = null;\n\tthis.timer = null;\n\tthis.cacheKey = '';\n\tthis.cache = [];\n\tthis.popups = [];\n\tthis.viewMode = viewMode;\n\tif (params && params.SEF_SET_FILTER_URL)\n\t{\n\t\tthis.bindUrlToButton('set_filter', params.SEF_SET_FILTER_URL);\n\t\tthis.sef = true;\n\t}\n\tif (params && params.SEF_DEL_FILTER_URL)\n\t{\n\t\tthis.bindUrlToButton('del_filter', params.SEF_DEL_FILTER_URL);\n\t}\n}\n\nJCSmartFilter.prototype.keyup = function(input)\n{\n\tif(!!this.timer)\n\t{\n\t\tclearTimeout(this.timer);\n\t}\n\tthis.timer = setTimeout(BX.delegate(function(){\n\t\tthis.reload(input);\n\t}, this), 500);\n};\n\nJCSmartFilter.prototype.click = function(checkbox)\n{\n\tif(!!this.timer)\n\t{\n\t\tclearTimeout(this.timer);\n\t}\n\n\tthis.timer = setTimeout(BX.delegate(function(){\n\t\tthis.reload(checkbox);\n\t}, this), 500);\n};\n\nJCSmartFilter.prototype.reload = function(input)\n{\n\tif (this.cacheKey !== '')\n\t{\n\t\t//Postprone backend query\n\t\tif(!!this.timer)\n\t\t{\n\t\t\tclearTimeout(this.timer);\n\t\t}\n\t\tthis.timer = setTimeout(BX.delegate(function(){\n\t\t\tthis.reload(input);\n\t\t}, this), 1000);\n\t\treturn;\n\t}\n\tthis.cacheKey = '|';\n\n\tthis.position = BX.pos(input, true);\n\tthis.form = BX.findParent(input, {'tag':'form'});\n\tif (this.form)\n\t{\n\t\tvar values = [];\n\t\tvalues[0] = {name: 'ajax', value: 'y'};\n\t\tthis.gatherInputsValues(values, BX.findChildren(this.form, {'tag': new RegExp('^(input|select)$', 'i')}, true));\n\n\t\tfor (var i = 0; i < values.length; i++)\n\t\t\tthis.cacheKey += values[i].name + ':' + values[i].value + '|';\n\n\t\tif (this.cache[this.cacheKey])\n\t\t{\n\t\t\tthis.curFilterinput = input;\n\t\t\tthis.postHandler(this.cache[this.cacheKey], true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.sef)\n\t\t\t{\n\t\t\t\tvar set_filter = BX('set_filter');\n\t\t\t\tset_filter.disabled = true;\n\t\t\t}\n\n\t\t\tthis.curFilterinput = input;\n\t\t\tBX.ajax.loadJSON(\n\t\t\t\tthis.ajaxURL,\n\t\t\t\tthis.values2post(values),\n\t\t\t\tBX.delegate(this.postHandler, this)\n\t\t\t);\n\t\t}\n\t}\n};\n\nJCSmartFilter.prototype.updateItem = function (PID, arItem)\n{\n\tif (arItem.PROPERTY_TYPE === 'N' || arItem.PRICE)\n\t{\n\t\tvar trackBar = window['trackBar' + PID];\n\t\tif (!trackBar && arItem.ENCODED_ID)\n\t\t\ttrackBar = window['trackBar' + arItem.ENCODED_ID];\n\n\t\tif (trackBar && arItem.VALUES)\n\t\t{\n\t\t\tif (arItem.VALUES.MIN)\n\t\t\t{\n\t\t\t\tif (arItem.VALUES.MIN.FILTERED_VALUE)\n\t\t\t\t\ttrackBar.setMinFilteredValue(arItem.VALUES.MIN.FILTERED_VALUE);\n\t\t\t\telse\n\t\t\t\t\ttrackBar.setMinFilteredValue(arItem.VALUES.MIN.VALUE);\n\t\t\t}\n\n\t\t\tif (arItem.VALUES.MAX)\n\t\t\t{\n\t\t\t\tif (arItem.VALUES.MAX.FILTERED_VALUE)\n\t\t\t\t\ttrackBar.setMaxFilteredValue(arItem.VALUES.MAX.FILTERED_VALUE);\n\t\t\t\telse\n\t\t\t\t\ttrackBar.setMaxFilteredValue(arItem.VALUES.MAX.VALUE);\n\t\t\t}\n\t\t}\n\t}\n\telse if (arItem.VALUES)\n\t{\n\t\tfor (var i in arItem.VALUES)\n\t\t{\n\t\t\tif (arItem.VALUES.hasOwnProperty(i))\n\t\t\t{\n\t\t\t\tvar value = arItem.VALUES[i];\n\t\t\t\tvar control = BX(value.CONTROL_ID);\n\n\t\t\t\tif (!!control)\n\t\t\t\t{\n\t\t\t\t\tvar label = document.querySelector('[data-role=\"label_'+value.CONTROL_ID+'\"]');\n\t\t\t\t\tif (value.DISABLED)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (label)\n\t\t\t\t\t\t\tBX.addClass(label, 'disabled');\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tBX.addClass(control.parentNode, 'disabled');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (label)\n\t\t\t\t\t\t\tBX.removeClass(label, 'disabled');\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tBX.removeClass(control.parentNode, 'disabled');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (value.hasOwnProperty('ELEMENT_COUNT'))\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel = document.querySelector('[data-role=\"count_'+value.CONTROL_ID+'\"]');\n\t\t\t\t\t\tif (label)\n\t\t\t\t\t\t\tlabel.innerHTML = value.ELEMENT_COUNT;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nJCSmartFilter.prototype.postHandler = function (result, fromCache)\n{\n\tvar hrefFILTER, url, curProp;\n\tvar modef = BX('modef');\n\tvar modef_num = BX('modef_num');\n\n\tif (!!result && !!result.ITEMS)\n\t{\n\t\tfor(var popupId in this.popups)\n\t\t{\n\t\t\tif (this.popups.hasOwnProperty(popupId))\n\t\t\t{\n\t\t\t\tthis.popups[popupId].destroy();\n\t\t\t}\n\t\t}\n\t\tthis.popups = [];\n\n\t\tfor(var PID in result.ITEMS)\n\t\t{\n\t\t\tif (result.ITEMS.hasOwnProperty(PID))\n\t\t\t{\n\t\t\t\tthis.updateItem(PID, result.ITEMS[PID]);\n\t\t\t}\n\t\t}\n\n\t\tif (!!modef && !!modef_num)\n\t\t{\n\t\t\tmodef_num.innerHTML = result.ELEMENT_COUNT;\n\t\t\threfFILTER = BX.findChildren(modef, {tag: 'A'}, true);\n\n\t\t\tif (result.FILTER_URL && hrefFILTER)\n\t\t\t{\n\t\t\t\threfFILTER[0].href = BX.util.htmlspecialcharsback(result.FILTER_URL);\n\t\t\t}\n\n\t\t\tif (result.FILTER_AJAX_URL && result.COMPONENT_CONTAINER_ID)\n\t\t\t{\n\t\t\t\tBX.unbindAll(hrefFILTER[0]);\n\t\t\t\tBX.bind(hrefFILTER[0], 'click', function(e)\n\t\t\t\t{\n\t\t\t\t\turl = BX.util.htmlspecialcharsback(result.FILTER_AJAX_URL);\n\t\t\t\t\tBX.ajax.insertToNode(url, result.COMPONENT_CONTAINER_ID);\n\t\t\t\t\treturn BX.PreventDefault(e);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (result.INSTANT_RELOAD && result.COMPONENT_CONTAINER_ID)\n\t\t\t{\n\t\t\t\turl = BX.util.htmlspecialcharsback(result.FILTER_AJAX_URL);\n\t\t\t\tBX.ajax.insertToNode(url, result.COMPONENT_CONTAINER_ID);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (modef.style.display === 'none')\n\t\t\t\t{\n\t\t\t\t\tmodef.style.display = 'inline-block';\n\t\t\t\t}\n\n\t\t\t\tif (this.viewMode == \"VERTICAL\")\n\t\t\t\t{\n\t\t\t\t\tcurProp = BX.findChild(BX.findParent(this.curFilterinput, {'class':'bx-filter-parameters-box'}), {'class':'bx-filter-container-modef'}, true, false);\n\t\t\t\t\tcurProp.appendChild(modef);\n\t\t\t\t}\n\n\t\t\t\tif (result.SEF_SET_FILTER_URL)\n\t\t\t\t{\n\t\t\t\t\tthis.bindUrlToButton('set_filter', result.SEF_SET_FILTER_URL);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (this.sef)\n\t{\n\t\tvar set_filter = BX('set_filter');\n\t\tset_filter.disabled = false;\n\t}\n\n\tif (!fromCache && this.cacheKey !== '')\n\t{\n\t\tthis.cache[this.cacheKey] = result;\n\t}\n\tthis.cacheKey = '';\n};\n\nJCSmartFilter.prototype.bindUrlToButton = function (buttonId, url)\n{\n\tvar button = BX(buttonId);\n\tif (button)\n\t{\n\t\tvar proxy = function(j, func)\n\t\t{\n\t\t\treturn function()\n\t\t\t{\n\t\t\t\treturn func(j);\n\t\t\t}\n\t\t};\n\n\t\tif (button.type == 'submit')\n\t\t\tbutton.type = 'button';\n\n\t\tBX.bind(button, 'click', proxy(url, function(url)\n\t\t{\n\t\t\twindow.location.href = url;\n\t\t\treturn false;\n\t\t}));\n\t}\n};\n\nJCSmartFilter.prototype.gatherInputsValues = function (values, elements)\n{\n\tif(elements)\n\t{\n\t\tfor(var i = 0; i < elements.length; i++)\n\t\t{\n\t\t\tvar el = elements[i];\n\t\t\tif (el.disabled || !el.type)\n\t\t\t\tcontinue;\n\n\t\t\tswitch(el.type.toLowerCase())\n\t\t\t{\n\t\t\t\tcase 'text':\n\t\t\t\tcase 'textarea':\n\t\t\t\tcase 'password':\n\t\t\t\tcase 'hidden':\n\t\t\t\tcase 'select-one':\n\t\t\t\t\tif(el.value.length)\n\t\t\t\t\t\tvalues[values.length] = {name : el.name, value : el.value};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'radio':\n\t\t\t\tcase 'checkbox':\n\t\t\t\t\tif(el.checked)\n\t\t\t\t\t\tvalues[values.length] = {name : el.name, value : el.value};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'select-multiple':\n\t\t\t\t\tfor (var j = 0; j < el.options.length; j++)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (el.options[j].selected)\n\t\t\t\t\t\t\tvalues[values.length] = {name : el.name, value : el.options[j].value};\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n};\n\nJCSmartFilter.prototype.values2post = function (values)\n{\n\tvar post = [];\n\tvar current = post;\n\tvar i = 0;\n\n\twhile(i < values.length)\n\t{\n\t\tvar p = values[i].name.indexOf('[');\n\t\tif(p == -1)\n\t\t{\n\t\t\tcurrent[values[i].name] = values[i].value;\n\t\t\tcurrent = post;\n\t\t\ti++;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar name = values[i].name.substring(0, p);\n\t\t\tvar rest = values[i].name.substring(p+1);\n\t\t\tif(!current[name])\n\t\t\t\tcurrent[name] = [];\n\n\t\t\tvar pp = rest.indexOf(']');\n\t\t\tif(pp == -1)\n\t\t\t{\n\t\t\t\t//Error - not balanced brackets\n\t\t\t\tcurrent = post;\n\t\t\t\ti++;\n\t\t\t}\n\t\t\telse if(pp == 0)\n\t\t\t{\n\t\t\t\t//No index specified - so take the next integer\n\t\t\t\tcurrent = current[name];\n\t\t\t\tvalues[i].name = '' + current.length;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t//Now index name becomes and name and we go deeper into the array\n\t\t\t\tcurrent = current[name];\n\t\t\t\tvalues[i].name = rest.substring(0, pp) + rest.substring(pp+1);\n\t\t\t}\n\t\t}\n\t}\n\treturn post;\n};\n\nJCSmartFilter.prototype.hideFilterProps = function(element)\n{\n\tvar obj = element.parentNode,\n\t\tfilterBlock = obj.querySelector(\"[data-role='bx_filter_block']\"),\n\t\tpropAngle = obj.querySelector(\"[data-role='prop_angle']\");\n\n\tif(BX.hasClass(obj, \"bx-active\"))\n\t{\n\t\tnew BX.easing({\n\t\t\tduration : 300,\n\t\t\tstart : { opacity: 1,  height: filterBlock.offsetHeight },\n\t\t\tfinish : { opacity: 0, height:0 },\n\t\t\ttransition : BX.easing.transitions.quart,\n\t\t\tstep : function(state){\n\t\t\t\tfilterBlock.style.opacity = state.opacity;\n\t\t\t\tfilterBlock.style.height = state.height + \"px\";\n\t\t\t},\n\t\t\tcomplete : function() {\n\t\t\t\tfilterBlock.setAttribute(\"style\", \"\");\n\t\t\t\tBX.removeClass(obj, \"bx-active\");\n\t\t\t}\n\t\t}).animate();\n\n\t\tBX.addClass(propAngle, \"fa-angle-down\");\n\t\tBX.removeClass(propAngle, \"fa-angle-up\");\n\t}\n\telse\n\t{\n\t\tfilterBlock.style.display = \"block\";\n\t\tfilterBlock.style.opacity = 0;\n\t\tfilterBlock.style.height = \"auto\";\n\n\t\tvar obj_children_height = filterBlock.offsetHeight;\n\t\tfilterBlock.style.height = 0;\n\n\t\tnew BX.easing({\n\t\t\tduration : 300,\n\t\t\tstart : { opacity: 0,  height: 0 },\n\t\t\tfinish : { opacity: 1, height: obj_children_height },\n\t\t\ttransition : BX.easing.transitions.quart,\n\t\t\tstep : function(state){\n\t\t\t\tfilterBlock.style.opacity = state.opacity;\n\t\t\t\tfilterBlock.style.height = state.height + \"px\";\n\t\t\t},\n\t\t\tcomplete : function() {\n\t\t\t}\n\t\t}).animate();\n\n\t\tBX.addClass(obj, \"bx-active\");\n\t\tBX.removeClass(propAngle, \"fa-angle-down\");\n\t\tBX.addClass(propAngle, \"fa-angle-up\");\n\t}\n};\n\nJCSmartFilter.prototype.showDropDownPopup = function(element, popupId)\n{\n\tvar contentNode = element.querySelector('[data-role=\"dropdownContent\"]');\n\tthis.popups[\"smartFilterDropDown\"+popupId] = BX.PopupWindowManager.create(\"smartFilterDropDown\"+popupId, element, {\n\t\tautoHide: true,\n\t\toffsetLeft: 0,\n\t\toffsetTop: 3,\n\t\toverlay : false,\n\t\tdraggable: {restrict:true},\n\t\tcloseByEsc: true,\n\t\tcontent: BX.clone(contentNode)\n\t});\n\tthis.popups[\"smartFilterDropDown\"+popupId].show();\n};\n\nJCSmartFilter.prototype.selectDropDownItem = function(element, controlId)\n{\n\tthis.keyup(BX(controlId));\n\n\tvar wrapContainer = BX.findParent(BX(controlId), {className:\"bx-filter-select-container\"}, false);\n\n\tvar currentOption = wrapContainer.querySelector('[data-role=\"currentOption\"]');\n\tcurrentOption.innerHTML = element.innerHTML;\n\tBX.PopupWindowManager.getCurrentPopup().close();\n};\n\nBX.namespace(\"BX.Iblock.SmartFilter\");\nBX.Iblock.SmartFilter = (function()\n{\n\t/** @param {{\n\t\t\tleftSlider: string,\n\t\t\trightSlider: string,\n\t\t\ttracker: string,\n\t\t\ttrackerWrap: string,\n\t\t\tminInputId: string,\n\t\t\tmaxInputId: string,\n\t\t\tminPrice: float|int|string,\n\t\t\tmaxPrice: float|int|string,\n\t\t\tcurMinPrice: float|int|string,\n\t\t\tcurMaxPrice: float|int|string,\n\t\t\tfltMinPrice: float|int|string|null,\n\t\t\tfltMaxPrice: float|int|string|null,\n\t\t\tprecision: int|null,\n\t\t\tcolorUnavailableActive: string,\n\t\t\tcolorAvailableActive: string,\n\t\t\tcolorAvailableInactive: string\n\t\t}} arParams\n\t */\n\tvar SmartFilter = function(arParams)\n\t{\n\t\tif (typeof arParams === 'object')\n\t\t{\n\t\t\tthis.leftSlider = BX(arParams.leftSlider);\n\t\t\tthis.rightSlider = BX(arParams.rightSlider);\n\t\t\tthis.tracker = BX(arParams.tracker);\n\t\t\tthis.trackerWrap = BX(arParams.trackerWrap);\n\n\t\t\tthis.minInput = BX(arParams.minInputId);\n\t\t\tthis.maxInput = BX(arParams.maxInputId);\n\n\t\t\tthis.minPrice = parseFloat(arParams.minPrice);\n\t\t\tthis.maxPrice = parseFloat(arParams.maxPrice);\n\n\t\t\tthis.curMinPrice = parseFloat(arParams.curMinPrice);\n\t\t\tthis.curMaxPrice = parseFloat(arParams.curMaxPrice);\n\n\t\t\tthis.fltMinPrice = arParams.fltMinPrice ? parseFloat(arParams.fltMinPrice) : parseFloat(arParams.curMinPrice);\n\t\t\tthis.fltMaxPrice = arParams.fltMaxPrice ? parseFloat(arParams.fltMaxPrice) : parseFloat(arParams.curMaxPrice);\n\n\t\t\tthis.precision = arParams.precision || 0;\n\n\t\t\tthis.priceDiff = this.maxPrice - this.minPrice;\n\n\t\t\tthis.leftPercent = 0;\n\t\t\tthis.rightPercent = 0;\n\n\t\t\tthis.fltMinPercent = 0;\n\t\t\tthis.fltMaxPercent = 0;\n\n\t\t\tthis.colorUnavailableActive = BX(arParams.colorUnavailableActive);//gray\n\t\t\tthis.colorAvailableActive = BX(arParams.colorAvailableActive);//blue\n\t\t\tthis.colorAvailableInactive = BX(arParams.colorAvailableInactive);//light blue\n\n\t\t\tthis.isTouch = false;\n\n\t\t\tthis.init();\n\n\t\t\tif ('ontouchstart' in document.documentElement)\n\t\t\t{\n\t\t\t\tthis.isTouch = true;\n\n\t\t\t\tBX.bind(this.leftSlider, \"touchstart\", BX.proxy(function(event){\n\t\t\t\t\tthis.onMoveLeftSlider(event)\n\t\t\t\t}, this));\n\n\t\t\t\tBX.bind(this.rightSlider, \"touchstart\", BX.proxy(function(event){\n\t\t\t\t\tthis.onMoveRightSlider(event)\n\t\t\t\t}, this));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.bind(this.leftSlider, \"mousedown\", BX.proxy(function(event){\n\t\t\t\t\tthis.onMoveLeftSlider(event)\n\t\t\t\t}, this));\n\n\t\t\t\tBX.bind(this.rightSlider, \"mousedown\", BX.proxy(function(event){\n\t\t\t\t\tthis.onMoveRightSlider(event)\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t\tBX.bind(this.minInput, \"keyup\", BX.proxy(function(event){\n\t\t\t\tthis.onInputChange();\n\t\t\t}, this));\n\n\t\t\tBX.bind(this.maxInput, \"keyup\", BX.proxy(function(event){\n\t\t\t\tthis.onInputChange();\n\t\t\t}, this));\n\t\t}\n\t};\n\n\tSmartFilter.prototype.init = function()\n\t{\n\t\tvar priceDiff;\n\n\t\tif (this.curMinPrice > this.minPrice)\n\t\t{\n\t\t\tpriceDiff = this.curMinPrice - this.minPrice;\n\t\t\tthis.leftPercent = (priceDiff*100)/this.priceDiff;\n\n\t\t\tthis.leftSlider.style.left = this.leftPercent + \"%\";\n\t\t\tthis.colorUnavailableActive.style.left = this.leftPercent + \"%\";\n\t\t}\n\n\t\tthis.setMinFilteredValue(this.fltMinPrice);\n\n\t\tif (this.curMaxPrice < this.maxPrice)\n\t\t{\n\t\t\tpriceDiff = this.maxPrice - this.curMaxPrice;\n\t\t\tthis.rightPercent = (priceDiff*100)/this.priceDiff;\n\n\t\t\tthis.rightSlider.style.right = this.rightPercent + \"%\";\n\t\t\tthis.colorUnavailableActive.style.right = this.rightPercent + \"%\";\n\t\t}\n\n\t\tthis.setMaxFilteredValue(this.fltMaxPrice);\n\t};\n\n\tSmartFilter.prototype.setMinFilteredValue = function (fltMinPrice)\n\t{\n\t\tthis.fltMinPrice = parseFloat(fltMinPrice);\n\t\tif (this.fltMinPrice >= this.minPrice)\n\t\t{\n\t\t\tvar priceDiff = this.fltMinPrice - this.minPrice;\n\t\t\tthis.fltMinPercent = (priceDiff*100)/this.priceDiff;\n\n\t\t\tif (this.leftPercent > this.fltMinPercent)\n\t\t\t\tthis.colorAvailableActive.style.left = this.leftPercent + \"%\";\n\t\t\telse\n\t\t\t\tthis.colorAvailableActive.style.left = this.fltMinPercent + \"%\";\n\n\t\t\tthis.colorAvailableInactive.style.left = this.fltMinPercent + \"%\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.colorAvailableActive.style.left = \"0%\";\n\t\t\tthis.colorAvailableInactive.style.left = \"0%\";\n\t\t}\n\t};\n\n\tSmartFilter.prototype.setMaxFilteredValue = function (fltMaxPrice)\n\t{\n\t\tthis.fltMaxPrice = parseFloat(fltMaxPrice);\n\t\tif (this.fltMaxPrice <= this.maxPrice)\n\t\t{\n\t\t\tvar priceDiff = this.maxPrice - this.fltMaxPrice;\n\t\t\tthis.fltMaxPercent = (priceDiff*100)/this.priceDiff;\n\n\t\t\tif (this.rightPercent > this.fltMaxPercent)\n\t\t\t\tthis.colorAvailableActive.style.right = this.rightPercent + \"%\";\n\t\t\telse\n\t\t\t\tthis.colorAvailableActive.style.right = this.fltMaxPercent + \"%\";\n\n\t\t\tthis.colorAvailableInactive.style.right = this.fltMaxPercent + \"%\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.colorAvailableActive.style.right = \"0%\";\n\t\t\tthis.colorAvailableInactive.style.right = \"0%\";\n\t\t}\n\t};\n\n\tSmartFilter.prototype.getXCoord = function(elem)\n\t{\n\t\tvar box = elem.getBoundingClientRect();\n\t\tvar body = document.body;\n\t\tvar docElem = document.documentElement;\n\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\t\tvar left = box.left + scrollLeft - clientLeft;\n\n\t\treturn Math.round(left);\n\t};\n\n\tSmartFilter.prototype.getPageX = function(e)\n\t{\n\t\te = e || window.event;\n\t\tvar pageX = null;\n\n\t\tif (this.isTouch && event.targetTouches[0] != null)\n\t\t{\n\t\t\tpageX = e.targetTouches[0].pageX;\n\t\t}\n\t\telse if (e.pageX != null)\n\t\t{\n\t\t\tpageX = e.pageX;\n\t\t}\n\t\telse if (e.clientX != null)\n\t\t{\n\t\t\tvar html = document.documentElement;\n\t\t\tvar body = document.body;\n\n\t\t\tpageX = e.clientX + (html.scrollLeft || body && body.scrollLeft || 0);\n\t\t\tpageX -= html.clientLeft || 0;\n\t\t}\n\n\t\treturn pageX;\n\t};\n\n\tSmartFilter.prototype.recountMinPrice = function()\n\t{\n\t\tvar newMinPrice = (this.priceDiff*this.leftPercent)/100;\n\t\tnewMinPrice = (this.minPrice + newMinPrice).toFixed(this.precision);\n\n\t\tif (newMinPrice != this.minPrice)\n\t\t\tthis.minInput.value = newMinPrice;\n\t\telse\n\t\t\tthis.minInput.value = \"\";\n\t\t/** @global JCSmartFilter smartFilter */\n\t\tsmartFilter.keyup(this.minInput);\n\t};\n\n\tSmartFilter.prototype.recountMaxPrice = function()\n\t{\n\t\tvar newMaxPrice = (this.priceDiff*this.rightPercent)/100;\n\t\tnewMaxPrice = (this.maxPrice - newMaxPrice).toFixed(this.precision);\n\n\t\tif (newMaxPrice != this.maxPrice)\n\t\t\tthis.maxInput.value = newMaxPrice;\n\t\telse\n\t\t\tthis.maxInput.value = \"\";\n\t\t/** @global JCSmartFilter smartFilter */\n\t\tsmartFilter.keyup(this.maxInput);\n\t};\n\n\tSmartFilter.prototype.onInputChange = function ()\n\t{\n\t\tvar priceDiff;\n\t\tif (this.minInput.value)\n\t\t{\n\t\t\tvar leftInputValue = this.minInput.value;\n\t\t\tif (leftInputValue < this.minPrice)\n\t\t\t\tleftInputValue = this.minPrice;\n\n\t\t\tif (leftInputValue > this.maxPrice)\n\t\t\t\tleftInputValue = this.maxPrice;\n\n\t\t\tpriceDiff = leftInputValue - this.minPrice;\n\t\t\tthis.leftPercent = (priceDiff*100)/this.priceDiff;\n\n\t\t\tthis.makeLeftSliderMove(false);\n\t\t}\n\n\t\tif (this.maxInput.value)\n\t\t{\n\t\t\tvar rightInputValue = this.maxInput.value;\n\t\t\tif (rightInputValue < this.minPrice)\n\t\t\t\trightInputValue = this.minPrice;\n\n\t\t\tif (rightInputValue > this.maxPrice)\n\t\t\t\trightInputValue = this.maxPrice;\n\n\t\t\tpriceDiff = this.maxPrice - rightInputValue;\n\t\t\tthis.rightPercent = (priceDiff*100)/this.priceDiff;\n\n\t\t\tthis.makeRightSliderMove(false);\n\t\t}\n\t};\n\n\tSmartFilter.prototype.makeLeftSliderMove = function(recountPrice)\n\t{\n\t\trecountPrice = (recountPrice !== false);\n\n\t\tthis.leftSlider.style.left = this.leftPercent + \"%\";\n\t\tthis.colorUnavailableActive.style.left = this.leftPercent + \"%\";\n\n\t\tvar areBothSlidersMoving = false;\n\t\tif (this.leftPercent + this.rightPercent >= 100)\n\t\t{\n\t\t\tareBothSlidersMoving = true;\n\t\t\tthis.rightPercent = 100 - this.leftPercent;\n\t\t\tthis.rightSlider.style.right = this.rightPercent + \"%\";\n\t\t\tthis.colorUnavailableActive.style.right = this.rightPercent + \"%\";\n\t\t}\n\n\t\tif (this.leftPercent >= this.fltMinPercent && this.leftPercent <= (100-this.fltMaxPercent))\n\t\t{\n\t\t\tthis.colorAvailableActive.style.left = this.leftPercent + \"%\";\n\t\t\tif (areBothSlidersMoving)\n\t\t\t{\n\t\t\t\tthis.colorAvailableActive.style.right = 100 - this.leftPercent + \"%\";\n\t\t\t}\n\t\t}\n\t\telse if(this.leftPercent <= this.fltMinPercent)\n\t\t{\n\t\t\tthis.colorAvailableActive.style.left = this.fltMinPercent + \"%\";\n\t\t\tif (areBothSlidersMoving)\n\t\t\t{\n\t\t\t\tthis.colorAvailableActive.style.right = 100 - this.fltMinPercent + \"%\";\n\t\t\t}\n\t\t}\n\t\telse if(this.leftPercent >= this.fltMaxPercent)\n\t\t{\n\t\t\tthis.colorAvailableActive.style.left = 100-this.fltMaxPercent + \"%\";\n\t\t\tif (areBothSlidersMoving)\n\t\t\t{\n\t\t\t\tthis.colorAvailableActive.style.right = this.fltMaxPercent + \"%\";\n\t\t\t}\n\t\t}\n\n\t\tif (recountPrice)\n\t\t{\n\t\t\tthis.recountMinPrice();\n\t\t\tif (areBothSlidersMoving)\n\t\t\t\tthis.recountMaxPrice();\n\t\t}\n\t};\n\n\tSmartFilter.prototype.countNewLeft = function(event)\n\t{\n\t\tvar pageX = this.getPageX(event);\n\n\t\tvar trackerXCoord = this.getXCoord(this.trackerWrap);\n\t\tvar rightEdge = this.trackerWrap.offsetWidth;\n\n\t\tvar newLeft = pageX - trackerXCoord;\n\n\t\tif (newLeft < 0)\n\t\t\tnewLeft = 0;\n\t\telse if (newLeft > rightEdge)\n\t\t\tnewLeft = rightEdge;\n\n\t\treturn newLeft;\n\t};\n\n\tSmartFilter.prototype.onMoveLeftSlider = function(e)\n\t{\n\t\tif (!this.isTouch)\n\t\t{\n\t\t\tthis.leftSlider.ondragstart = function() {\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}\n\n\t\tif (!this.isTouch)\n\t\t{\n\t\t\tdocument.onmousemove = BX.proxy(function(event) {\n\t\t\t\tthis.leftPercent = ((this.countNewLeft(event)*100)/this.trackerWrap.offsetWidth);\n\t\t\t\tthis.makeLeftSliderMove();\n\t\t\t}, this);\n\n\t\t\tdocument.onmouseup = function() {\n\t\t\t\tdocument.onmousemove = document.onmouseup = null;\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdocument.ontouchmove = BX.proxy(function(event) {\n\t\t\t\tthis.leftPercent = ((this.countNewLeft(event)*100)/this.trackerWrap.offsetWidth);\n\t\t\t\tthis.makeLeftSliderMove();\n\t\t\t}, this);\n\n\t\t\tdocument.ontouchend = function() {\n\t\t\t\tdocument.ontouchmove = document.touchend = null;\n\t\t\t};\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tSmartFilter.prototype.makeRightSliderMove = function(recountPrice)\n\t{\n\t\trecountPrice = (recountPrice !== false);\n\n\t\tthis.rightSlider.style.right = this.rightPercent + \"%\";\n\t\tthis.colorUnavailableActive.style.right = this.rightPercent + \"%\";\n\n\t\tvar areBothSlidersMoving = false;\n\t\tif (this.leftPercent + this.rightPercent >= 100)\n\t\t{\n\t\t\tareBothSlidersMoving = true;\n\t\t\tthis.leftPercent = 100 - this.rightPercent;\n\t\t\tthis.leftSlider.style.left = this.leftPercent + \"%\";\n\t\t\tthis.colorUnavailableActive.style.left = this.leftPercent + \"%\";\n\t\t}\n\n\t\tif ((100-this.rightPercent) >= this.fltMinPercent && this.rightPercent >= this.fltMaxPercent)\n\t\t{\n\t\t\tthis.colorAvailableActive.style.right = this.rightPercent + \"%\";\n\t\t\tif (areBothSlidersMoving)\n\t\t\t{\n\t\t\t\tthis.colorAvailableActive.style.left = 100 - this.rightPercent + \"%\";\n\t\t\t}\n\t\t}\n\t\telse if(this.rightPercent <= this.fltMaxPercent)\n\t\t{\n\t\t\tthis.colorAvailableActive.style.right = this.fltMaxPercent + \"%\";\n\t\t\tif (areBothSlidersMoving)\n\t\t\t{\n\t\t\t\tthis.colorAvailableActive.style.left = 100 - this.fltMaxPercent + \"%\";\n\t\t\t}\n\t\t}\n\t\telse if((100-this.rightPercent) <= this.fltMinPercent)\n\t\t{\n\t\t\tthis.colorAvailableActive.style.right = 100-this.fltMinPercent + \"%\";\n\t\t\tif (areBothSlidersMoving)\n\t\t\t{\n\t\t\t\tthis.colorAvailableActive.style.left = this.fltMinPercent + \"%\";\n\t\t\t}\n\t\t}\n\n\t\tif (recountPrice)\n\t\t{\n\t\t\tthis.recountMaxPrice();\n\t\t\tif (areBothSlidersMoving)\n\t\t\t\tthis.recountMinPrice();\n\t\t}\n\t};\n\n\tSmartFilter.prototype.onMoveRightSlider = function(e)\n\t{\n\t\tif (!this.isTouch)\n\t\t{\n\t\t\tthis.rightSlider.ondragstart = function() {\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}\n\n\t\tif (!this.isTouch)\n\t\t{\n\t\t\tdocument.onmousemove = BX.proxy(function(event) {\n\t\t\t\tthis.rightPercent = 100-(((this.countNewLeft(event))*100)/(this.trackerWrap.offsetWidth));\n\t\t\t\tthis.makeRightSliderMove();\n\t\t\t}, this);\n\n\t\t\tdocument.onmouseup = function() {\n\t\t\t\tdocument.onmousemove = document.onmouseup = null;\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdocument.ontouchmove = BX.proxy(function(event) {\n\t\t\t\tthis.rightPercent = 100-(((this.countNewLeft(event))*100)/(this.trackerWrap.offsetWidth));\n\t\t\t\tthis.makeRightSliderMove();\n\t\t\t}, this);\n\n\t\t\tdocument.ontouchend = function() {\n\t\t\t\tdocument.ontouchmove = document.ontouchend = null;\n\t\t\t};\n\t\t}\n\n\t\treturn false;\n\t};\n\n\treturn SmartFilter;\n})();"]}